<mxfile host="app.diagrams.net" modified="2021-04-07T07:21:19.638Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36" etag="ValhVyAOaW0lhe9Mzfcn" version="14.5.7" type="github">
  <diagram id="0bU8umBcV4iLwMCIOOc6" name="第 1 页">
    <mxGraphModel dx="1422" dy="772" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="2339" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="FrP4gUGGCShGiQhVi8kW-82" value="&lt;b&gt;&lt;font style=&quot;font-size: 17px&quot;&gt;1. AOP 生成代理类过程&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="575" y="460" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-123" value="" style="group;dashed=1;container=0;" parent="1" vertex="1" connectable="0">
          <mxGeometry x="1510" y="80" width="1090" height="730" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-1" value="refresh()入口" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="269.9972268907563" y="140" width="118.99159663865545" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-2" value="..." style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="428.65268907563024" y="140" width="59.495798319327726" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-1" target="FrP4gUGGCShGiQhVi8kW-2" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-4" target="FrP4gUGGCShGiQhVi8kW-2" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-4" value="省略IoC步骤" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="408.820756302521" y="80" width="99.15966386554621" height="19.999999999999996" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-8" value="finishBeanFactoryInitialization(beanFactory)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="542.6863025210084" y="140" width="237.9831932773109" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-2" target="FrP4gUGGCShGiQhVi8kW-8" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-10" target="FrP4gUGGCShGiQhVi8kW-8" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-10" value="初始化实例" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="617.056050420168" y="80" width="89.24369747899158" height="19.999999999999996" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-12" value="省略 Bean 实例话过程，直接到初始化方法" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="830" y="140" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-8" target="FrP4gUGGCShGiQhVi8kW-12" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-15" value="initializeBean(beanName, exposedObject, mbd)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="1122.436974789916" y="140" width="237.9831932773109" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-12" target="FrP4gUGGCShGiQhVi8kW-15" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-28" value="&lt;span style=&quot;text-align: left&quot;&gt;applyBeanPostProcessorsAfterInitialization&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="1122.436974789916" y="260" width="237.9831932773109" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" target="FrP4gUGGCShGiQhVi8kW-28" edge="1">
          <mxGeometry x="230" y="80" as="geometry">
            <mxPoint x="1241.4285714285716" y="180" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-30" value="执行 BeanPostProcessor 接口 after 方法&lt;br&gt;省略Ioc初始化其他步骤" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-29" vertex="1" connectable="0">
          <mxGeometry x="-0.1333" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-35" value="processor.postProcessAfterInitialization(result, beanName)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="1077.81512605042" y="350" width="327.2268907563025" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-28" target="FrP4gUGGCShGiQhVi8kW-35" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-37" value="开始 AOP 步骤" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-36" vertex="1" connectable="0">
          <mxGeometry x="-0.0894" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-38" value="wrapIfNecessary(bean, beanName, cacheKey)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="1077.81512605042" y="430" width="327.2268907563025" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-35" target="FrP4gUGGCShGiQhVi8kW-38" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-40" value="包装 Bean 如果有资格被代理" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-39" vertex="1" connectable="0">
          <mxGeometry x="-0.2071" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-41" value="isInfrastructureClass ||&amp;nbsp;shouldSkip" style="rhombus;whiteSpace=wrap;html=1;rounded=1;strokeColor=#6c8ebf;fillColor=#dae8fc;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="1072.8571428571427" y="549.9999999999999" width="337.14285714285705" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-42" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-38" target="FrP4gUGGCShGiQhVi8kW-41" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-43" value="判断是否是基础设施类「Pointcut，Advice」等&lt;br&gt;判断是否是候选的&amp;nbsp;Advisor" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-42" vertex="1" connectable="0">
          <mxGeometry x="-0.2608" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-44" value="不代理" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cdeb8b;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="1082.7731092436975" y="699.9999999999999" width="317.31092436974785" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-41" target="FrP4gUGGCShGiQhVi8kW-44" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-46" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-45" vertex="1" connectable="0">
          <mxGeometry x="-0.4916" relative="1" as="geometry">
            <mxPoint y="7.06" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-47" value="getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, null)" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cdeb8b;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="676.218487394958" y="559.9999999999999" width="296.48739495798316" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-41" target="FrP4gUGGCShGiQhVi8kW-47" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-49" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-48" vertex="1" connectable="0">
          <mxGeometry x="-0.3059" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-50" value="findEligibleAdvisors(beanClass, beanName)" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#ffff88;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="230" y="559.9999999999999" width="297.4789915966386" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-47" target="FrP4gUGGCShGiQhVi8kW-50" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-52" value="找到合适的 Advisor" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-51" vertex="1" connectable="0">
          <mxGeometry x="-0.2838" y="-2" relative="1" as="geometry">
            <mxPoint x="-8.82" y="2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-53" value="AopUtils.findAdvisorsThatCanApply(candidateAdvisors, beanClass)" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#ffff88;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="230" y="690" width="297.4789915966386" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-54" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-50" target="FrP4gUGGCShGiQhVi8kW-53" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-55" value="&lt;b&gt;找到适合当前类的 Advisors&lt;br&gt;获取到当前类 Class,通过反射获取到声明的所有方法&lt;br&gt;是否匹配切面中定义的表达式&lt;br&gt;这里要匹配表达式&lt;br&gt;&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-54" vertex="1" connectable="0">
          <mxGeometry x="-0.3132" y="1" relative="1" as="geometry">
            <mxPoint x="-1" y="9" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-56" value="createProxy(bean.getClass(), beanName, specificInterceptors, new SingletonTargetSource(bean))" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cdeb8b;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="676.218487394958" y="649.9999999999999" width="296.48739495798316" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-57" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-47" target="FrP4gUGGCShGiQhVi8kW-56" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-58" value="创建代理对象" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-57" vertex="1" connectable="0">
          <mxGeometry x="0.0691" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-59" value="buildAdvisors(beanName, specificInterceptors)" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cdeb8b;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="676.218487394958" y="750" width="296.48739495798316" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-60" value="创建&amp;nbsp;ProxyFactory 代理工厂，设置属性" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-56" target="FrP4gUGGCShGiQhVi8kW-59" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-61" value="createAopProxy(AdvisedSupport config)" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cdeb8b;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="676.218487394958" y="860" width="296.48739495798316" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-62" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-59" target="FrP4gUGGCShGiQhVi8kW-61" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-59" target="FrP4gUGGCShGiQhVi8kW-61" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-66" value="目标类是接口 JDK 动态代理，没有走 CGlib" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-64" vertex="1" connectable="0">
          <mxGeometry x="-0.0659" y="5" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-67" value="getProxy(ClassLoader classLoader)" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cdeb8b;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="676.218487394958" y="939.9999999999998" width="296.48739495798316" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-68" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-61" target="FrP4gUGGCShGiQhVi8kW-67" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-69" value="return" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#ffcccc;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="1082.7731092436975" y="1009.9999999999998" width="317.31092436974785" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-70" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-44" target="FrP4gUGGCShGiQhVi8kW-69" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-72" value="返回代理对象" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cdeb8b;labelBorderColor=none;" parent="1" vertex="1">
          <mxGeometry x="676.218487394958" y="1009.9999999999998" width="296.48739495798316" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-73" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-67" target="FrP4gUGGCShGiQhVi8kW-72" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;labelBorderColor=none;" parent="1" source="FrP4gUGGCShGiQhVi8kW-72" target="FrP4gUGGCShGiQhVi8kW-69" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="FrP4gUGGCShGiQhVi8kW-31" target="FrP4gUGGCShGiQhVi8kW-12" edge="1">
          <mxGeometry x="230" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-31" value="&lt;span style=&quot;font-size: 11px ; background-color: rgb(255 , 255 , 255)&quot;&gt;因为&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;font-size: 11px ; background-color: rgb(255 , 255 , 255)&quot;&gt;AOP 自动代理实现了 BeanPostProcessor接口，&lt;br&gt;&lt;div&gt;&lt;b&gt;在后置处理器 after 方法执行&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="815.0036974789915" y="80" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-120" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="1510" y="80" width="1090" height="630" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-84" value="orderService.order()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="659.9972268907563" y="90" width="118.99159663865545" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-89" value="&lt;div&gt;// 调用的 Java 代理，在工厂中获取到代理类，然后执行目标方法&lt;/div&gt;&lt;div&gt;ApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; OrderService orderService = (OrderService) context.getBean(&quot;orderService&quot;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; orderService.order();&lt;/div&gt;" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;dashed=1;strokeColor=#000000;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="490" width="510" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-90" value="invoke(Object proxy, Method method, Object[] args)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="539.4899999999998" y="170" width="358" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-91" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-84" target="FrP4gUGGCShGiQhVi8kW-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-92" value="进入调用" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="FrP4gUGGCShGiQhVi8kW-91" vertex="1" connectable="0">
          <mxGeometry x="-0.1627" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-93" value="this.advised.getInterceptorsAndDynamicInterceptionAdvice(method, targetClass)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="539.4899999999998" y="270" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-94" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-90" target="FrP4gUGGCShGiQhVi8kW-93" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-95" value="判断是不是 hashcode等基础方法，如果是返回&lt;br&gt;获取目标方法的拦截器链" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="FrP4gUGGCShGiQhVi8kW-94" vertex="1" connectable="0">
          <mxGeometry x="-0.1956" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-96" value="chain.isEmpty()" style="rhombus;whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cdeb8b;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="536.7399999999998" y="370" width="365.51" height="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-97" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-93" target="FrP4gUGGCShGiQhVi8kW-96" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-98" value="判断拦截器链是否为空" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="FrP4gUGGCShGiQhVi8kW-97" vertex="1" connectable="0">
          <mxGeometry x="-0.1236" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-99" value="new ReflectiveMethodInvocation(proxy, target, method, args, targetClass, chain)" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cce5ff;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry y="390" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-100" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-96" target="FrP4gUGGCShGiQhVi8kW-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-101" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="FrP4gUGGCShGiQhVi8kW-100" vertex="1" connectable="0">
          <mxGeometry x="0.0558" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-102" value="AopUtils.invokeJoinpointUsingReflection(target, method, argsToUse)" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#ffff88;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="539.4799999999996" y="510" width="360.01" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-103" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-96" target="FrP4gUGGCShGiQhVi8kW-102" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-104" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="FrP4gUGGCShGiQhVi8kW-103" vertex="1" connectable="0">
          <mxGeometry x="-0.1211" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-106" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-105" target="FrP4gUGGCShGiQhVi8kW-102" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-105" value="直接调用目标方法，不在去生成一些没有用的&amp;nbsp;MethodInvocation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;dashed=1;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="960" y="505" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-108" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-107" target="FrP4gUGGCShGiQhVi8kW-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-107" value="创建一个方法调用" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;dashed=1;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="125" y="330" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-110" value="invocation.proceed()" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cce5ff;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry y="490" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-111" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-99" target="FrP4gUGGCShGiQhVi8kW-110" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-112" value="执行拦截器链" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="FrP4gUGGCShGiQhVi8kW-111" vertex="1" connectable="0">
          <mxGeometry x="-0.2838" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-113" value="this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=#36393d;fillColor=#cce5ff;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry y="590" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-114" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-110" target="FrP4gUGGCShGiQhVi8kW-113" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-116" value="&lt;b&gt;&lt;span style=&quot;font-size: 12px ; background-color: rgb(248 , 249 , 250)&quot;&gt;currentInterceptorIndex = -1，每调用一次 +1 直到等于&lt;br&gt;&lt;/span&gt;拦截器链 size -1&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="FrP4gUGGCShGiQhVi8kW-114" vertex="1" connectable="0">
          <mxGeometry x="-0.3721" y="2" relative="1" as="geometry">
            <mxPoint y="1.18" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-117" value="完成" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;labelBorderColor=none;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="659.9972268907568" y="590" width="118.99159663865545" height="39.99999999999999" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-119" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-102" target="FrP4gUGGCShGiQhVi8kW-117" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-118" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="FrP4gUGGCShGiQhVi8kW-120" source="FrP4gUGGCShGiQhVi8kW-113" target="FrP4gUGGCShGiQhVi8kW-117" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-124" value="&lt;font style=&quot;font-size: 15px&quot;&gt;&lt;b&gt;2. AOP 实例调用过程&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="FrP4gUGGCShGiQhVi8kW-120" vertex="1">
          <mxGeometry x="150" y="150" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;dashed=1;" parent="1" source="FrP4gUGGCShGiQhVi8kW-121" target="FrP4gUGGCShGiQhVi8kW-113" edge="1">
          <mxGeometry x="1510" y="80" as="geometry" />
        </mxCell>
        <mxCell id="FrP4gUGGCShGiQhVi8kW-121" value="拦截器调用切面方法地方：&lt;br&gt;1. after:在 finally 语句块中执行&lt;br&gt;2. afterReturning: 在目标方法后&lt;br&gt;3. afterThrowing: 在try catch 语句块中" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1590" y="750" width="210" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
